extends layout 

block content 

    script.
        function listFilter() {
        // Declare variables
        let input = document.getElementById('myInput');
        let upCase = input.value.toUpperCase();
        let items = document.querySelectorAll(".planeopt");

        console.log(items[2].textContent)
        console.log(items[2].textContent.toUpperCase().includes(upCase));

        for (i = 0; i < items.length; i++) { 
            let capital = items[i].textContent.toUpperCase()

            if (capital.includes(upCase)) {
                items[i].style.display = ""
                console.log('found something')
            } else {
                items[i].style.display = "none"
            }

        }
        
        }
        
        // Loop through all list items, and hide those who don't match the search query
        //- for (i = 0; i < items.length; i++) {
      

        //-     if (items[i].textContent.includes(input)) {
        //-         console.log('found something');
        //-         items[i].style.display = ""
        //-     } else {
        //-         items[i].style.display = "none"
        //-     }
                
            

            //- a = item[i].getElementsByTagName("option")[0];
            //- console.log(a.innerText);
            //- txtValue = a.textContent || a.innerText;
            //- if (txtValue.toUpperCase().indexOf(upCase) > -1) {
            //- item[i].style.display = "";
            //- } else {
            //- item[i].style.display = "none";
            //- }
            //- ul.style.height = `${i*1.5}px`;
        
     


    div(class="mainCont")
        
        h1=title
        if renderCompare 

            p You chose: #{name} 
            p Your plane's Battle Rating: #{plane_br}
            p The BR range you picked: +- #{br}
            hr
           
            if items 
                p Number of different planes you might face at your rating: #{items.length}
                hr
                ul
                    each item in items 
                        li 
                            a(href=item._id)=item.name
                            p BR: #{item.rating_RB}
                            p Max climb rate: #{item.max_climb_RB} m/s
                            p Max turn rate: #{item.turn_time_RB} s
                            p Max speed: #{item.max_speed_RB} Km/h
        else
            form(method='POST')
                div.form-group 
                    label(for='plane')
                    input(type="text" id='myInput' name='myInput' onkeyup='listFilter()' placeholder='Search for names...')
                    //- ul(id="myUL")
                    //-     each airplane in airplanes 
                    //-         li 
                    //-             a(href='#' onclick=`((e) => myTestFunc())`)=airplane.name
                    select#plane.form-control(name='plane' required)
                        option(class='planeopt' value='') --Please select an airplane--
                            each airplane in airplanes 
                                option(class='planeopt' value=`${airplane.name}@BREAK@${airplane.rating_RB}`)=airplane.name
        
                div.form-group
                    label(for='brtarget') Select what BR you'd like to compare your plane to 
                    select#br.form-control(name='br' required)
                        option(value='') --Please select uptier/downtier range
                        option(value='0') 0
                        option(value='0.3') 0.3
                        option(value='0.7') 0.7
                        option(value='1') 1
                div.form-group 
                    label(for='sortType') How would you like to sort the results?
                        br
                        label(for='radioChoice') Speed - fastest to slowest
                        input#sortChoice1.form-control(type='radio' name='radioChoice' value='speedDesc')
                        br
                        label(for='radioChoice') Turn rate - fastest to slowest
                        input#sortChoice2.form-control(type='radio' name='radioChoice' value='turnAsc')
                        br
                        label(for='radioChoice') Climb rate - fastest to slowest
                        input#sortChoice3.form-control(type='radio' name='radioChoice' value='climbDesc')
                        br
                        label(for='radioChoice') How many are faster than me?
                        input#sortChoice3.form-control(type='radio' name='radioChoice' value='areFaster')

                button.btn.btn-primary(type='submit') Submit
                
                if errors 
                    ul 
                        for error in errors 
                            li!=errors.msg





            //- ul 
            //-     each airplane in airplanes 
            //-         li  
            //-             div(class='container')
            //-                 a(href=airplane.url) #{airplane.name}
            //-                 p Upgraded turn time #{airplane.turn_time_RB_upgraded}s
            //-                 p Stock turn time #{airplane.turn_time_RB_stock}s
            //-                 p Stock speed #{airplane.max_speed_RB_stock} Km/h
            //-                 p Upgraded speed #{airplane.max_speed_RB_upgraded} Km/h
            //-                 img(src=airplane.vehicle_image, width='200px')
            //-                 img(src=airplane.dynamic_url, width='200px')
            //-                 hr
